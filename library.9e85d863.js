!function(){function e(e){var t=localStorage.getItem(e);return JSON.parse(t)}function t(e,t){for(var a=20*(e-1),o=a+20,i=document.querySelector(".gallery"),r=JSON.parse(localStorage.getItem("genres")),c="",s=a;s<o;s++)s<t.length&&(c+='<li class="gallery__item" data-id="'.concat(t[s].id,'">\n                <article>\n                    <img class="article__image" src="').concat(t[s].poster_path?"https://image.tmdb.org/t/p/w500"+t[s].poster_path:"https://img.freepik.com/free-vector/error-404-concept-for-landing-page_52683-20173.jpg?w=2000",'" alt="').concat(t[s].title?t[s].title:t[s].original_title,'" width="280" loading="lazy">\n      <div class ="card__desc">\n                    <h1 class="article__description">').concat(t[s].title?t[s].title:t[s].original_title,'</h1>\n                    <p class="article__description-orange">\n                        <span class="pseudo-element">\n                            ').concat(n(t[s].genre_ids,r).length>=3?n(t[s].genre_ids,r).slice(0,2).join(", ")+", Others...":n(t[s].genre_ids,r).join(", ")?n(t[s].genre_ids,r).join(", "):"NO DATA",'\n                        </span>\n                        <span class="article__description-year">\n                            ').concat(t[s].release_date?t[s].release_date.slice(0,4):"OUR ERA",'\n                        </span>\n                        <span class="modal__text-params-vote modal__text-params">\n                        ').concat(t[s].vote_average,"           \n                        </span>\n                    </p>\n                    </div>\n                </article>\n            </li>"));i.innerHTML=c}function n(e,t){return e.map((function(e){return t.genres.filter((function(t){return t.id===e})).flatMap((function(e){return e.name}))}))}var a,o={pagContainer:document.querySelector(".js-pagination")};function i(e,t){if(o.pagContainer.innerHTML="",e&&t&&1!==t){var n="",i=e-1,r=e-2,c=Number(e)+1,s=Number(e)+2;a=e,e>1&&(n+='<li class="pagination__item"><button class="previos">\n        &larr;</button>\n      </li>'),e>3&&(n+='<li class="pagination__item"><button class="pagination__btn">1</button></li>'),e>4&&(n+='<li class="pagination__item"><button class="pagination__dottes">...</button></li>'),e>2&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(r,"</button></li>")),e>1&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(i,"</button></li>")),n+='<li class="pagination__item"><button class="pagination__btn active__btn">'.concat(e,"</button></li>"),c<=t&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(c,"</button></li>")),s<=t&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(s,"</button></li>")),t>e+3&&(n+='<li class="pagination__item"><button class="pagination__dottes">...</button></li>'),t>e+2&&(n+='<li class="pagination__item"><button class="pagination__btn">'.concat(t,"</button></li>")),t>e&&(n+='<li class="pagination__item"><button class="next">&rarr;</button></li>'),o.pagContainer.innerHTML=n}}function r(n,r){o.pagContainer.addEventListener("click",(function(o){if("BUTTON"!==o.target.nodeName||"..."===o.target.textContent)return;a=o.target.classList.contains("previos")?Number(a)-1:o.target.classList.contains("next")?Number(a)+1:Number(o.target.textContent);var c=e(r);i(a,n),t(a,c)}))}function c(e,t){var n=JSON.parse(localStorage.getItem(e));return!!n&&!!n.find((function(e){return e.id===Number(t)}))}var s={openGallery:document.querySelector(".gallery"),closeBtn:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]"),modal:document.querySelector(".modal__form"),article:document.querySelector(".modal__form-card"),body:document.querySelector("body")};function l(e){e.target===s.backdrop&&(s.backdrop.classList.remove("is-open"),s.body.classList.remove("ishidden"),u())}function d(e){"Escape"===e.code&&(s.backdrop.classList.remove("is-open"),s.body.classList.remove("ishidden"),u())}function u(){document.removeEventListener("keydown",d),document.removeEventListener("click",l)}function m(e,t){if(localStorage.getItem(e)){var n=localStorage.getItem(e),a=JSON.parse(n);a.find((function(e){return e.id===t.id}))||(a.push(t),localStorage.setItem(e,JSON.stringify(a)))}else{var o=[];o.push(t),localStorage.setItem(e,JSON.stringify(o))}}document.querySelector(".modal__btn").addEventListener("click",(function(e){e.preventDefault(),s.backdrop.classList.remove("is-open"),s.body.classList.remove("ishidden"),u()}));var _,p,g={openGallery:document.querySelector(".gallery"),closeBtn:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]"),modal:document.querySelector(".modal__form"),article:document.querySelector(".modal__form-card"),body:document.querySelector("body")},v="queue",b="watched",f="";function y(t){_=e(t),g.openGallery.addEventListener("click",h)}function h(e){e.target.nodeName!==e.currentTarget.nodeName&&(p=e.target.closest("li").dataset.id,function(e,t){var a=e.filter((function(e){return e.id===Number(t)})),o=JSON.parse(localStorage.getItem("genres")),i=a[0],r=i.title,s=i.poster_path,l=i.overview,d=i.vote_average,u=i.vote_count,m=i.popularity,_=i.original_title;f='\n      <img\n        class="modal__form-img"\n        src="'.concat(s?"https://image.tmdb.org/t/p/w500"+s:"https://img.freepik.com/free-vector/error-404-concept-for-landing-page_52683-20173.jpg?w=2000",'"\n        alt=""\n      />\n      <div class="modal__descript">\n        <h2 class="modal__title">').concat(r,'</h2>\n\n        <table class="modal__descript-table">\n          <tbody>\n            <tr>\n              <td class="modal__text-properties">Vote / Votes</td>\n              <td class="modal__text-params">\n                <span class="modal__text-params-vote">').concat(d,'</span> /\n                <span class="modal__text-params-votes">').concat(u,'</span>\n              </td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Popularity</td>\n              <td class="modal__text-params">').concat(m,'</td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Original Title</td>\n              <td class="modal__text-params">').concat(_,'</td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Genre</td>\n              <td class="modal__text-params modal__text-low">').concat(n(a[0].genre_ids,o).join(", ")?n(a[0].genre_ids,o).join(", "):"NO DATA",'</td>\n            </tr>\n          </tbody>\n        </table>\n        <h3 class="modal__descript-titel">About</h3>\n        <p class="modal__descript-text">\n          ').concat(l||"NO DATA",'\n        </p>\n        <ul class="modal__button__list">\n          <li>\n<button class="modal__button__item-watched" type="button" data-action="').concat(c(b,t)?"remove":"add",'">\n            ').concat(c(b,t)?"remove from watched":"add to watched",'\n  </button>\n          </li>\n          <li>\n <button class="modal__button__item-queue" type="button" data-action="').concat(c(v,t)?"remove":"add",'">\n').concat(c(v,t)?"remove from QUEUE":"add to QUEUE","\n  </button>\n  </li>\n        </ul>\n      </div>\n  "),g.article.innerHTML=f;var p=document.querySelector(".modal__button__item-watched"),y=document.querySelector(".modal__button__item-queue");p.addEventListener("click",S),y.addEventListener("click",L)}(_,p),g.backdrop.classList.add("is-open"),g.body.classList.add("ishidden"),document.addEventListener("click",q),document.addEventListener("keydown",k))}function S(t){if("add"===t.target.dataset.action){var n=_.find((function(e){return e.id===Number(p)}));m(b,n),t.target.textContent="Remove from watched",t.target.dataset.action="remove"}else{var a=e(b),o=a.findIndex((function(e){return e.id===Number(p)}));a.splice(o,1),localStorage.setItem(b,JSON.stringify(a)),t.target.textContent="Add to watched",t.target.dataset.action="add"}}function L(t){if("add"===t.target.dataset.action){var n=_.find((function(e){return e.id===Number(p)}));m(v,n),t.target.textContent="Remove from queue",t.target.dataset.action="remove"}else{var a=e(v),o=a.findIndex((function(e){return e.id===Number(p)}));a.splice(o,1),localStorage.setItem(v,JSON.stringify(a)),t.target.textContent="Add to queue",t.target.dataset.action="add"}}function q(e){e.target===g.backdrop&&E()}function k(e){"Escape"===e.code&&E()}function E(){g.backdrop.classList.remove("is-open"),g.body.classList.remove("ishidden"),document.removeEventListener("keydown",k),document.removeEventListener("click",q);var e=document.querySelector(".filters-row__btn--active.is-active"),n=JSON.parse(localStorage.getItem(e.dataset.info));if(x(),n&&0!==n.length){var a=Math.ceil(n.length/20);t(1,n),i(1,a),r(a,e.dataset.info)}}document.querySelector(".modal__btn").addEventListener("click",(function(){E()}));var w=document.querySelector(".gallery");function x(){w.innerHTML='<li class="default">\n        <p class="message">Sorry, there is nothing here yet.</p>\n        <img\n          src="https://img.freepik.com/free-photo/awkward-girl-shrugging-shoulders-with-apologizing-face-expression-looking-clueless-say-sorry-showing-empty-hands-has-nothing-standing-over-white-background_176420-48867.jpg"\n          alt="Empty"\n        />\n      </li>'}var N=document.querySelector(".js-watched"),O=document.querySelector(".js-queue");var I=document.querySelector(".js-watched"),j=document.querySelector(".js-queue");var M=document.querySelector(".button__up"),T=document.querySelector("header");var C="#007acc",A="#fff",B="#0E161C",J="#007acc42",P="#ff6b01",U="#15141D",D="#EBEBEB",H="#ff6b014c",Q=document.documentElement,G=document.querySelector('[data-theme="light"]'),R=document.querySelector('[data-theme="dark"]'),z=localStorage.getItem("theme");function V(){Q.style.setProperty("--accent",P),Q.style.setProperty("--text",U),Q.style.setProperty("--bg",D),Q.style.setProperty("--btn",H),G.classList.add("is-hidden"),R.classList.remove("is-hidden"),F("light")}function W(){Q.style.setProperty("--accent",C),Q.style.setProperty("--text",A),Q.style.setProperty("--bg",B),Q.style.setProperty("--btn",J),G.classList.remove("is-hidden"),R.classList.add("is-hidden"),F("dark")}function F(e){localStorage.setItem("theme",e)}G.addEventListener("click",V),R.addEventListener("click",W);var K={openModalBtn:document.querySelector(".footer__link"),closeModalBtn:document.querySelector(".modal__btn-footer"),modal:document.querySelector("[data-modal-footer]"),body:document.querySelector("body")};function X(){K.modal.classList.add("is-openened"),K.body.classList.add("ishidden"),document.addEventListener("click",Z),document.addEventListener("keydown",$)}function Y(){K.modal.classList.remove("is-openened"),K.body.classList.remove("ishidden"),ee()}function Z(e){e.target===K.modal&&(K.modal.classList.remove("is-openened"),K.body.classList.remove("ishidden"),ee())}function $(e){"Escape"===e.code&&(K.modal.classList.remove("is-openened"),K.body.classList.remove("ishidden"),ee())}function ee(){document.removeEventListener("keydown",$),document.removeEventListener("click",Z)}var te={btnWatched:document.querySelector(".js-watched"),btnQueue:document.querySelector(".js-queue"),gallery:document.querySelector(".gallery"),pagination:document.querySelector(".js-pagination")};"light"!==z&&z?W():V();var ne="queue";te.btnQueue.classList.add("is-active"),te.btnWatched.addEventListener("click",(function(){N.classList.add("is-active"),O.classList.remove("is-active"),x();var n=e("watched");if(n&&0!==n.length){var a=Math.ceil(n.length/20);t(1,n),i(1,a),r(a,"watched"),y("watched")}})),te.btnQueue.addEventListener("click",(function(){I.classList.remove("is-active"),j.classList.add("is-active"),x();var n=e("queue");if(n&&0!==n.length){var a=Math.ceil(n.length/20);t(1,n),i(1,a),r(a,"queue"),y("queue")}}));var ae,oe,ie=e("queue");ie&&0!==ie.length?(ae=ie,oe=Math.ceil(ae.length/20),t(1,ae),i(1,oe),r(oe,ne),y(ne)):x(),K.openModalBtn.addEventListener("click",X),K.closeModalBtn.addEventListener("click",Y),new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting?M.classList.add("is-hidden"):M.classList.remove("is-hidden")}))}),{rootMargin:"1000px",threshold:1}).observe(T)}();
//# sourceMappingURL=library.9e85d863.js.map
