function t(t){const n=document.querySelector(".gallery"),a=JSON.parse(localStorage.getItem("genres")),o=t.map((t=>`<li class="gallery__item" data-id="${t.id}">\n                <article>\n                    <img class="article__image" src="${t.poster_path?"https://image.tmdb.org/t/p/w500"+t.poster_path:"https://img.freepik.com/free-vector/error-404-concept-for-landing-page_52683-20173.jpg?w=2000"}" alt="${t.title?t.title:t.original_title}" width="280" loading="lazy">\n      <div class ="card__desc">\n                    <h1 class="article__description">${t.title?t.title:t.original_title}</h1>\n                    <p class="article__description-orange">\n                        <span class="pseudo-element">\n                            ${e(t.genre_ids,a).length>=3?e(t.genre_ids,a).slice(0,2).join(", ")+", Others...":e(t.genre_ids,a).join(", ")?e(t.genre_ids,a).join(", "):"NO DATA"}\n                        </span>\n                        <span>\n                            ${t.release_date?t.release_date.slice(0,4):"OUR ERA"}\n                        </span>\n                    </p>\n                    </div>\n                </article>\n            </li>`)).join("");n.innerHTML=o}function e(t,e){return t.map((t=>e.genres.filter((e=>e.id===t)).flatMap((t=>t.name))))}var n,a,o,s,i={};n=i,a="Spinner",o=function(){return c},s=function(t){return c=t},Object.defineProperty(n,a,{get:o,set:s,enumerable:!0,configurable:!0});var r=function(){return r=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},l={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},c=function(){function t(t){void 0===t&&(t={}),this.opts=r(r({},l),t)}return t.prototype.spin=function(t){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),d(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),t&&t.insertBefore(this.el,t.firstChild||null),function(t,e){var n=Math.round(e.corners*e.width*500)/1e3+"px",a="none";!0===e.shadow?a="0 2px 4px #000":"string"==typeof e.shadow&&(a=e.shadow);for(var o=function(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],a=0,o=t.split(",");a<o.length;a++){var s=o[a].match(e);if(null!==s){var i=+s[2],r=+s[5],l=s[4],c=s[7];0!==i||l||(l=c),0!==r||c||(c=l),l===c&&n.push({prefix:s[1]||"",x:i,y:r,xUnits:l,yUnits:c,end:s[8]})}}return n}(a),s=0;s<e.lines;s++){var i=~~(360/e.lines*s+e.rotate),r=d(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:u(e.fadeColor,s),borderRadius:n,transformOrigin:"left",transform:"rotate("+i+"deg) translateX("+e.radius+"px)"}),l=s*e.direction/e.lines/e.speed;l-=1/e.speed;var c=d(document.createElement("div"),{width:"100%",height:"100%",background:u(e.color,s),borderRadius:n,boxShadow:m(o,i),animation:1/e.speed+"s linear "+l+"s infinite "+e.animation});r.appendChild(c),t.appendChild(r)}}(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function d(t,e){for(var n in e)t.style[n]=e[n];return t}function u(t,e){return"string"==typeof t?t:t[e%t.length]}function m(t,e){for(var n=[],a=0,o=t;a<o.length;a++){var s=o[a],i=p(s.x,s.y,e);n.push(s.prefix+i[0]+s.xUnits+" "+i[1]+s.yUnits+s.end)}return n.join(", ")}function p(t,e,n){var a=n*Math.PI/180,o=Math.sin(a),s=Math.cos(a);return[Math.round(1e3*(t*s+e*o))/1e3,Math.round(1e3*(-t*o+e*s))/1e3]}const g=new(0,i.Spinner)({lines:18,length:5,width:2,radius:8,scale:2,corners:.6,speed:.9,rotate:22,animation:"spinner-line-fade-default",direction:-1,color:"#ff6b08",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"});async function h(t){g.spin(document.querySelector(".gallery"));const e=new URLSearchParams({api_key:"7a4cd4317772102a9b88ef6a54b71590",page:t});return await fetch(`https://api.themoviedb.org/3/trending/movie/day?${e}`).then((t=>t.json()))}function _(t){(async function(){const t=new URLSearchParams({api_key:"7a4cd4317772102a9b88ef6a54b71590"});return await fetch(`https://api.themoviedb.org/3/genre/movie/list?${t}`).then((t=>t.json()))})().then((t=>{localStorage.setItem("genres",JSON.stringify(t))}))}function f(t){const e=localStorage.getItem(t);return JSON.parse(e)}function b(t,e){const n=JSON.parse(localStorage.getItem(t));return!!n&&!!n.find((t=>t.id===Number(e)))}const y={openGallery:document.querySelector(".gallery"),closeBtn:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]"),modal:document.querySelector(".modal__form"),article:document.querySelector(".modal__form-card"),body:document.querySelector("body")};let v,S,L="";function x(t){v=t.results,y.openGallery.addEventListener("click",w)}function w(t){t.target.nodeName!==t.currentTarget.nodeName&&(S=t.target.closest("li").dataset.id,function(t,n){const a=t.filter((t=>t.id===Number(n))),o=JSON.parse(localStorage.getItem("genres")),{title:s,poster_path:i,overview:r,vote_average:l,vote_count:c,popularity:d,original_title:u}=a[0];L=`\n      <img\n        class="modal__form-img"\n        src="${i?"https://image.tmdb.org/t/p/w500"+i:"https://img.freepik.com/free-vector/error-404-concept-for-landing-page_52683-20173.jpg?w=2000"}"\n        alt=""\n      />\n      <div class="modal__descript">\n        <h2 class="modal__title">${s}</h2>\n\n        <table class="modal__descript-table">\n          <tbody>\n            <tr>\n              <td class="modal__text-properties">Vote / Votes</td>\n              <td class="modal__text-params">\n                <span class="modal__text-params-vote">${l}</span> /\n                <span class="modal__text-params-votes">${c}</span>\n              </td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Popularity</td>\n              <td class="modal__text-params">${d}</td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Original Title</td>\n              <td class="modal__text-params">${u}</td>\n            </tr>\n            <tr>\n              <td class="modal__text-properties">Genre</td>\n              <td class="modal__text-params modal__text-low">${e(a[0].genre_ids,o).join(", ")?e(a[0].genre_ids,o).join(", "):"NO DATA"}</td>\n            </tr>\n          </tbody>\n        </table>\n        <h3 class="modal__descript-titel">About</h3>\n        <p class="modal__descript-text">\n          ${r||"NO DATA"}\n        </p>\n        <ul class="modal__button__list">\n          <li>\n            <button class="modal__button__item-watched" type="button" data-action="${b("watched",n)?"remove":"add"}">${b("watched",n)?"remove from watched":"add to watched"}</button>\n          </li>\n          <li><button class="modal__button__item-queue" type="button"  data-action="${b("queue",n)?"remove":"add"}">${b("queue",n)?"remove from QUEUE":"add to QUEUE"}</button></li>\n        </ul>\n      </div>\n  `,y.article.innerHTML=L;const m=document.querySelector(".modal__button__item-watched"),p=document.querySelector(".modal__button__item-queue");m.addEventListener("click",q),p.addEventListener("click",I)}(v,S),y.backdrop.classList.add("is-open"),y.body.classList.add("ishidden"),document.addEventListener("click",N),document.addEventListener("keydown",k))}function N(t){t.target===y.backdrop&&(y.backdrop.classList.remove("is-open"),y.body.classList.remove("ishidden"),E())}function k(t){"Escape"===t.code&&(y.backdrop.classList.remove("is-open"),y.body.classList.remove("ishidden"),E())}function E(){document.removeEventListener("keydown",k),document.removeEventListener("click",N)}function q(t){if("add"===t.target.dataset.action){$("watched",v.find((t=>t.id===Number(S)))),t.target.textContent="Remove from watched",t.target.dataset.action="remove"}else{const e=f("watched");let n=e.findIndex((t=>t.id===Number(S)));e.splice(n,1),localStorage.setItem("watched",JSON.stringify(e)),t.target.textContent="Add to watched",t.target.dataset.action="add"}}function I(t){if("add"===t.target.dataset.action){$("queue",v.find((t=>t.id===Number(S)))),t.target.textContent="Remove from queue",t.target.dataset.action="remove"}else{const e=f("queue"),n=e.findIndex((t=>t.id===Number(S)));e.splice(n,1),localStorage.setItem("queue",JSON.stringify(e)),t.target.textContent="Add to queue",t.target.dataset.action="add"}}function $(t,e){if(localStorage.getItem(t)){const n=localStorage.getItem(t),a=JSON.parse(n);a.find((t=>t.id===e.id))||(a.push(e),localStorage.setItem(t,JSON.stringify(a)))}else{const n=[];n.push(e),localStorage.setItem(t,JSON.stringify(n))}}document.querySelector(".modal__btn").addEventListener("click",(function(t){t.preventDefault(),y.backdrop.classList.remove("is-open"),y.body.classList.remove("ishidden"),E()}));const C={pagContainer:document.querySelector(".js-pagination")};let O=localStorage.getItem("currentPage");function P(t,e,n){if(C.pagContainer.innerHTML="",!t||!e||1===e)return;let a="";const o=t-1,s=t-2,i=Number(t)+1,r=Number(t)+2;O=t,t>1&&(a+='<li class="pagination__item"><button class="previos">\n        &larr;</button>\n      </li>'),t>3&&(a+='<li class="pagination__item"><button class="pagination__btn">1</button></li>'),t>4&&(a+='<li class="pagination__item"><button class="pagination__dottes">...</button></li>'),t>2&&(a+=`<li class="pagination__item"><button class="pagination__btn">${s}</button></li>`),t>1&&(a+=`<li class="pagination__item"><button class="pagination__btn">${o}</button></li>`),a+=`<li class="pagination__item"><button class="pagination__btn active__btn">${t}</button></li>`,i<=e&&(a+=`<li class="pagination__item"><button class="pagination__btn">${i}</button></li>`),r<=e&&(a+=`<li class="pagination__item"><button class="pagination__btn">${r}</button></li>`),e>Number(t)+3&&(a+='<li class="pagination__item"><button class="pagination__dottes">...</button></li>'),e>Number(t)+2&&(a+=`<li class="pagination__item"><button class="pagination__btn">${e}</button></li>`),e>t&&(a+='<li class="pagination__item"><button class="next">&rarr;</button></li>'),C.pagContainer.innerHTML=a}function j(e){"BUTTON"===e.target.nodeName&&"..."!==e.target.textContent&&(O=e.target.classList.contains("previos")?Number(O)-1:e.target.classList.contains("next")?Number(O)+1:Number(e.target.textContent),localStorage.setItem("currentPage",O),h(O).then((e=>{t(e.results),O=localStorage.getItem("currentPage"),P(O,e.total_pages),x(e)})).catch((t=>console.log(t))).finally((()=>{})))}C.pagContainer.addEventListener("click",j);const M="#007acc",T="#fff",A="#0E161C",U="#007acc42",B="#ff6b01",J="#15141D",z="#EBEBEB",R="#ff6b014c",D=document.documentElement,H=document.querySelector('[data-theme="light"]'),G=document.querySelector('[data-theme="dark"]');let Z=localStorage.getItem("theme");function F(){D.style.setProperty("--accent",B),D.style.setProperty("--text",J),D.style.setProperty("--bg",z),D.style.setProperty("--btn",R),H.classList.add("is-hidden"),G.classList.remove("is-hidden"),V("light")}function Q(){D.style.setProperty("--accent",M),D.style.setProperty("--text",T),D.style.setProperty("--bg",A),D.style.setProperty("--btn",U),H.classList.remove("is-hidden"),G.classList.add("is-hidden"),V("dark")}function V(t){localStorage.setItem("theme",t)}H.addEventListener("click",F),G.addEventListener("click",Q);async function X(t,e){const n=new URLSearchParams({api_key:"7a4cd4317772102a9b88ef6a54b71590",page:e,query:t});return await fetch(`https://api.themoviedb.org/3/search/movie?${n}`).then((t=>t.json()))}const K=document.querySelector(".gallery");const W=document.querySelector(".js-pagination"),Y=document.querySelector(".page-header__form"),tt=document.querySelector(".gallery"),et=document.querySelector(".search");let nt,at;function ot(e){e.preventDefault(),nt=e.target.elements.text.value.trim(),W.removeEventListener("click",j);const n=e.target.elements.text.value.trim();if(""===n)return et.textContent="Search result not successful. Enter the correct movie name and try again",void setTimeout((()=>{et.textContent=""}),2e3);nt=n,at=1,localStorage.setItem("currentPage",at),X(nt,at).then((e=>{if(0===e.total_pages)return K.innerHTML='<li class="default">\n        <p class="message">Sorry, there is nothing here yet.</p>\n        <img\n          src="https://img.freepik.com/free-photo/awkward-girl-shrugging-shoulders-with-apologizing-face-expression-looking-clueless-say-sorry-showing-empty-hands-has-nothing-standing-over-white-background_176420-48867.jpg"\n          alt="Empty"\n        />\n      </li>',et.textContent="Search result not successful. Enter the correct movie name and try again",setTimeout((()=>{et.textContent=""}),2e3),void P(1,e.total_pages);t(e.results),P(1,e.total_pages),W.removeEventListener("click",j),W.addEventListener("click",st),x(e)})).catch((t=>console.log(t))).finally((()=>{})),e.target.reset()}function st(e){"BUTTON"===e.target.nodeName&&"..."!==e.target.textContent&&(at=e.target.classList.contains("previos")?Number(at)-1:e.target.classList.contains("next")?Number(at)+1:Number(e.target.textContent),X(nt,at).then((e=>{tt.innerHTML="",t(e.results),P(at,e.total_pages),x(e)})).catch((t=>console.log(t))).finally((()=>{})))}const it=document.querySelector(".button__up"),rt=document.querySelector("header");const lt={openModalBtn:document.querySelector(".footer__link"),closeModalBtn:document.querySelector(".modal__btn-footer"),modal:document.querySelector("[data-modal-footer]"),body:document.querySelector("body")};function ct(){lt.modal.classList.add("is-openened"),lt.body.classList.add("ishidden"),document.addEventListener("click",ut),document.addEventListener("keydown",mt)}function dt(){lt.modal.classList.remove("is-openened"),lt.body.classList.remove("ishidden"),pt()}function ut(t){t.target===lt.modal&&(lt.modal.classList.remove("is-openened"),lt.body.classList.remove("ishidden"),pt())}function mt(t){"Escape"===t.code&&(lt.modal.classList.remove("is-openened"),lt.body.classList.remove("ishidden"),pt())}function pt(){document.removeEventListener("keydown",mt),document.removeEventListener("click",ut)}"light"!==Z&&Z?Q():F();let gt=1;localStorage.getItem("currentPage")&&(gt=localStorage.getItem("currentPage")),async function(){_();let t=localStorage.getItem("currentPage");return localStorage.getItem("currentPage")||(t=1),await h(t)}().then((e=>{t(e.results),P(gt,e.total_pages),x(e)})).catch((t=>console.log(t))).finally((()=>{})),lt.openModalBtn.addEventListener("click",ct),lt.closeModalBtn.addEventListener("click",dt),Y.addEventListener("submit",ot),new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.isIntersecting?it.classList.add("is-hidden"):it.classList.remove("is-hidden")}))}),{rootMargin:"1000px",threshold:1}).observe(rt);
//# sourceMappingURL=index.8f3277d1.js.map
